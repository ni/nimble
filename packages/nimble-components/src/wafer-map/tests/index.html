<!DOCTYPE html>
<html>
<head>
    <script src="../../../dist/all-components-bundle.min.js"></script>
</head>
<body>
    <h1>Wafer Map Performance Tests</h1>
    <script>
        document.addEventListener('DOMContentLoaded', main);
        
        const colorScales = {
            colors: ['red', 'orange', 'yellow', 'green'],
            values: ['1', '33', '66', '100']
        };

        function createWaferMap(functionName, dieCount) {
            performance.mark(`${functionName}_start`);
            const waferMap = document.createElement('nimble-wafer-map');
            waferMap.dies = generateDies(dieCount).wafermapDieSet;
            waferMap.colorScale = colorScales;
            document.body.appendChild(waferMap);
            performance.mark(`${functionName}_end`);
            performance.measure(functionName, `${functionName}_start`, `${functionName}_end`);
            performance.clearMarks(`${functionName}_start`);
            performance.clearMarks(`${functionName}_end`);
        }
        
        function main() {
            createWaferMap('smallWafer', 10 ** 4);
            createWaferMap('mediumWafer', 10 ** 5);
            createWaferMap('largeWafer', 10 ** 6);
        }
        
        function generateDies(diesCount) {
            const wafermapDieSet = [];
            const sideLength = Math.floor(Math.sqrt(diesCount / Math.PI) * 2);
            const radius = sideLength / 2;
            const centerX = Math.floor(sideLength / 2);
            const centerY = centerX;
            for (let i = 0; i <= sideLength; i++) {
                for (let j = 0; j <= sideLength; j++) {
                    const distance = Math.sqrt((i - centerX) ** 2 + (j - centerY) ** 2);
                    if (distance <= radius) {
                        wafermapDieSet.push({ x: i, y: j, value: ((i + j) % 100).toString() });
                    }
                }
            }
            return { wafermapDieSet };
        }
</script>
</body>
</html>
