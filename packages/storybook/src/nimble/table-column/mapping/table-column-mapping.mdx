import { Canvas, Meta, Controls, Title, Description } from '@storybook/blocks';
import { columnOperationBehavior } from '../base/table-column-stories-utils';
import * as tableColumnMappingStories from './table-column-mapping.stories';
import * as emptyMappingStories from '../../mapping/empty/mapping-empty.stories';
import * as iconMappingStories from '../../mapping/icon/mapping-icon.stories';
import * as spinnerMappingStories from '../../mapping/spinner/mapping-spinner.stories';
import * as textMappingStories from '../../mapping/text/mapping-text.stories';
import ComponentApisLink from '../../../docs/component-apis-link.mdx';
import { tableColumnMappingTag } from '../../../../../nimble-components/src/table-column/mapping';
import { mappingEmptyTag } from '../../../../../nimble-components/src/mapping/empty';
import { tableTag } from '../../../../../nimble-components/src/table';
import { spinnerTag } from '../../../../../nimble-components/src/spinner';

<Meta of={tableColumnMappingStories} />
<Title of={tableColumnMappingStories} />

The <Tag name={tableColumnMappingTag}/> renders specific number, boolean, or
string values as an icon, a spinner, text, or an icon/spinner with text in the

<Tag name={tableTag} />.

<p>{columnOperationBehavior}</p>

<Canvas of={tableColumnMappingStories.mappingColumn} />

## API

<Controls of={tableColumnMappingStories.mappingColumn} />
<ComponentApisLink />

### Icon Mapping

<Description of={iconMappingStories} />
<Controls of={iconMappingStories.iconMapping} />

### Spinner Mapping

<Description of={spinnerMappingStories} />
<Controls of={spinnerMappingStories.spinnerMapping} />

### Text Mapping

<Description of={textMappingStories} />
<Controls of={textMappingStories.textMapping} />

### Empty Mapping

<Description of={emptyMappingStories} />
<Controls of={emptyMappingStories.emptyMapping} />

## Usage

### Best Practices

-   Provide a mapping for every expected record value. Because grouping is
    performed on the record value, non-mapped record values can result in
    multiple groups without group labels.
    -   To improve grouping behavior of a value that shouldn't be rendered in
        table cells, use a <Tag name={mappingEmptyTag}/> element to provide text
        for that value's group row.
-   Avoid having multiple values that map to the same text because grouping and
    sorting is done on the record value rather than the mapped text.

### Blazor Usage

When setting a child mapping element's `Key` value to a string, you must wrap it
in `@()` so that the compiler treats it as a string, e.g.
`<NimbleMappingIcon Key=@("foo") ...>`
